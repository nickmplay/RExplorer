<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Rexplorer Tests</title>
	<link rel="stylesheet" href="./2.6.1/jasmine.min.css">
	<script src="./2.6.1/jasmine.min.js"></script>
	<script src="./2.6.1/jasmine-html.min.js"></script>
	<script src="./2.6.1/boot.min.js"></script>
	<script src="../src/js/app.js"></script>
</head>
<body>

<script>
//jasmine docs:https://jasmine.github.io/2.3/introduction.html#section-Expectations

//test app.init set up
describe("app.init", function(){
	app.init("test");
	var resultLength = app.state.dirs.length;
	var resultnDir = app.state.nDirs;

	it("has one default directory following init", function(){
		expect(resultLength).toEqual(1);
		expect(resultnDir).toEqual(0);
	}); 
});

// test app.addTab set up
describe("app.addTab", function(){
	app.init("test");
	var newTab = {
		path: "New",
		subDirs: ["Folder 1", "Folder 2"],
		files: ["file1.xlsx", "file2.xls"]
	};
	app.addTab(newTab);

	var resultCount = app.state.nDirs;

	it("can add a tab", function(){
		expect(resultCount).toEqual(1);
	});
});

// test app.removeTab set up
describe("app.removeTab", function(){
	app.init("test");
	var newTab = {
		path: "New",
		subDirs: ["Folder 1", "Folder 2"],
		files: ["file1.xlsx", "file2.xls"]
	};
	app.addTab(newTab);
	app.addTab(JSON.parse(JSON.stringify(newTab)));
	var resultCountPre = app.state.nDirs;

	app.removeTab(1);
	var resultCountPost = app.state.nDirs;

	it("can add a tab", function(){
		expect(resultCountPre).toEqual(2);
		expect(resultCountPost).toEqual(1);
	});
});

// test app.updateTab set up
describe("app.removeTab", function(){
	app.init("test");
	var newTab = {
		path: "New",
		subDirs: ["Folder 1", "Folder 2"],
		files: ["file1.xlsx", "file2.xls"]
	};
	app.addTab(newTab);
	app.addTab(JSON.parse(JSON.stringify(newTab)));
	var resultCountPre = app.state.nDirs;
	var resultPathPre = app.state.dirs[1].path;

	app.updateTab(2, {
		path: "Updated",
		subDirs: ["Folder 1", "Folder 2"],
		files: ["file1.xlsx", "file2.xls"]
	});
	var resultPathPost = app.state.dirs[1].path;

	it("can add a tab", function(){
		expect(resultPathPre).toEqual("New");
		expect(resultCountPre).toEqual(2);
		expect(resultPathPost).toEqual("Updated");
	});
});

</script>
</body>
</html>